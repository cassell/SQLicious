<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Sqlicious by cassell</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Sqlicious</h1>
          <h2>SQLicious is a PHP Database ORM and abstraction layer for MySQL that handles generating an object model from your database schema. Its powerful closure based query processing and ability to handle large datasets make it powerful and flexible. It's included web interface and ease of development make it a joy to use.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/cassell/SQLicious/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/cassell/SQLicious/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/cassell/SQLicious" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p><img src="http://static.andrewcassell.com/github/sqlicious/SQLicious.png" alt="SQLicious Logo"></p>

<h1>SQLicious</h1>

<p>SQLicious is a PHP Active Record ORM that generates an object models from your MySQL database. Its powerful closure based query processing and ability to handle large datasets make it powerful and flexible. Its included web interface and ease of development make it a joy to use.</p>

<p>The features that make SQLicious easy and powerful are:</p>

<ol>
<li>Web UI for code generation and fast paced development. It helps with common programming tasks (object creation, APIs, class stubs, queries). Command line version also available.</li>
<li>Easily output data as JSON for APIs</li>
<li>Queries can easily be limited to a subset of fields in a table ("select first_name, last_name from table" vs. "select * from table"). You can still use objects when using a subset of the fields.</li>
<li>SQL UPDATEs are minimal and only changed columns are updated</li>
<li>Closure based query processing that lets you handle data efficiently and in a fully customizable manner</li>
<li>Buffered queries for performance and Unbuffered queries for processing huge datasets while staying memory safe</li>
<li>You can extend the Factories and Objects to encapsulate the logic of a model</li>
<li>Process any SQL query (multiple tables and joins) using the same closure based process model. Easily output the results to an Array or JSON</li>
<li>Handles the CRUD (Creating, Reading, Updating, and Deleting)</li>
<li>Convert Timezones Using MySQL Timezone Tables</li>
<li>Generated Code is creating using Mustache Templates</li>
</ol><h1>CRUD: Creating, Reading, Updating, and Deleting</h1>

<p>Creating a new record</p>

<pre><code>$user = new User();
$user-&gt;setFirstName('Ada');
$user-&gt;setLastName('Lovelace');
$user-&gt;setEmail('lovelace@example.com');
$user-&gt;save();
echo $user-&gt;getId() // will print the new primary key
</code></pre>

<p>Finding an object with id 17.</p>

<pre><code>$f = new UserFactory();
$user = $f-&gt;getObject(17);

// shorthand
$user = User::findId(17);
</code></pre>

<p>Querying for objects</p>

<pre><code>$f = new UserFactory();
$f-&gt;addBinding(new EqualsBinding("archived","0"));
$users = $f-&gt;getObjects();
</code></pre>

<p>Contains searches for objects</p>

<pre><code>// looking for users with example.com in their email
$f = new UserFactory();
$f-&gt;addBinding(new ContainsBinding("email","example.com"));
$users = $f-&gt;getObjects();
</code></pre>

<p>String based binding clauses</p>

<pre><code>// looking for active users
$f = new UserFactory();
$f-&gt;addBinding("user.archived != 1");
$users = $f-&gt;getObjects();
</code></pre>

<p>Updating a record.</p>

<pre><code>$user = User::findId(17);
$user-&gt;setFirstName("John");
$user-&gt;save();
</code></pre>

<p>Deleting a single record.</p>

<pre><code>$user = User::findId(18);
$user-&gt;delete();
</code></pre>

<p>Deleting multiple records.</p>

<pre><code>// delete archived users
$f = new UserFactory();
$f-&gt;addBinding(new EqualsBinding("archived","1"));
$f-&gt;delete();
</code></pre>

<p>Limit the query to the first 20 rows</p>

<pre><code>$f = new UserFactory();
$f-&gt;setLimit(20);
$users = $f-&gt;getObjects();
</code></pre>

<p>Running a count query</p>

<pre><code>$f = new UserFactory();
$f-&gt;addArchivedFalseBinding()
$count = $f-&gt;count(); // count of all not archived users
</code></pre>

<h1>Performance</h1>

<p>Limiting the fields that are pulled back from the database. You can still use objects</p>

<pre><code>$f = new UserFactory();
$f-&gt;setSelectFields("first_name","last_name","email");
$users = $f-&gt;getObjects();
</code></pre>

<p>Getting a JSON ready array</p>

<pre><code>$f = new UserFactory();
$f-&gt;setSelectFields("first_name","last_name","email");
$userJSON = $f-&gt;getJSON(); // returns an an array of PHP objects that can be encoded to  [ { 'id' : 1, 'firstName' : 'John', 'lastName' : 'Doe', 'email' : 'doe@example.com'}, ... ]
</code></pre>

<h1>Closures</h1>

<p>Process each row queried with a closure(anonymous function). Iterate over very large datasets without hitting memory constraints use unbufferedProcess()</p>

<pre><code>$f = new UserFactory();
$f-&gt;process(function($user)
{
    if(!validate_email($user-&gt;getEmail()))
    {
        $user-&gt;setEmail('');
        $user-&gt;save();
    }
});
</code></pre>

<p>Getting count of Rows before process</p>

<pre><code>$f = new UserFactory();
$result = $f-&gt;getMysqlResult();
$countOfUsers = $f-&gt;getNumberOfRowsFromResult($result);
$f-&gt;process(function($user)
{
    if(!validate_email($user-&gt;getEmail()))
    {
        $user-&gt;setEmail('');
        $user-&gt;save();
    }
});
$f-&gt;freeResult();
</code></pre>



<h1>Memory Safe Closures</h1>

<p>Unbuffered Processing of large datasets (will potentially lock the table while processing)</p>

<pre><code>$f = new UserFactory(); // imagine a table with millions of rows
$f-&gt;unbufferedProcess(function($user)
{
    if(!validate_email($user-&gt;getEmail()))
    {
        $user-&gt;setEmail('');
        $user-&gt;save();
    }
});
</code></pre>

<h1>Data Processors</h1>

<p>Data processors are great for processing the results from an entirely custom SELECT query with closures.</p>

<p>Buffered Queries for Speed  </p>

<pre><code>$p = new DatabaseProcessor('example');
$p-&gt;setSQL('select first_name, last_name from user');
$p-&gt;process(function($row)
{
    echo $row['first_name'];
    print_r($row);

});
</code></pre>

<p>Unbuffered for Large Datasets</p>

<pre><code>$p = new DatabaseProcessor('example');
$p-&gt;setSQL('select first_name, last_name from user');
$p-&gt;unbufferedProcess(function($row)
{
    echo $row['first_name'];
});
</code></pre>

<h1>Other flexibile queries</h1>

<p>Find method for writing a custom where clause (returns objects)</p>

<pre><code>$f = new UserFactory();
$users = $f-&gt;findObjectWhere("where archived != 1 and email like '%@example.com'");
</code></pre>

<p>&lt;!--
Demo is offline.</p>

<h1>Web UI</h1>

<p><a href="http://demo.sqlicious.com">http://demo.sqlicious.com</a>
-&gt;&gt;</p>

<h1>Converting Timezones</h1>

<pre><code>// Note requires time zones installed in mysql database
// usage: ($dateTime,$sourceTimezone,$destTimezone). $dateTime may be string or time(), returns a timestamp
$f = new UserLoginFactory();
$centralTime = $f-&gt;convertTimezone('2012-02-23 04:10PM', 'US/Eastern',  'US/Central');
</code></pre>

<h1>Composer (Packagist)</h1>

<p><a href="https://packagist.org/packages/sqlicious/sqlicious">https://packagist.org/packages/sqlicious/sqlicious</a></p>

<h1>Setup</h1>

<ol>
<li>Download the source code (or use composer)</li>
<li>Use the example.config.inc.php to build your config.inc.php</li>
<li>Make sure the generator has write access to the folders you specify in config</li>
<li>Generate the DAO using the web UI or command line</li>
<li>require_once('sqlicious.inc.php') in your project</li>
<li>require_once or include any other generated factories that you need in your project (suggestion: use an autoloader)</li>
</ol><h1>Requirements</h1>

<ul>
<li>PHP 5.3 or greater</li>
<li>MySQL</li>
</ul>
        </section>

        <footer>
          Sqlicious is maintained by <a href="https://github.com/cassell">cassell</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>